"use strict";exports.id=782,exports.ids=[782],exports.modules={34182:(a,b,c)=>{let d;c.d(b,{BP:()=>o,Bh:()=>p,DW:()=>r,G6:()=>l,Ru:()=>m,Ts:()=>q,bk:()=>n});var e=c(67989),f=c(61448),g=c(75535);d=(0,e.Dk)().length?(0,e.Dk)()[0]:(0,e.Wp)({apiKey:"AIzaSyDAupXvxYn4UQQmqPxUQGYwQ551N20ILpk",authDomain:"itdiary-ase.firebaseapp.com",projectId:"itdiary-ase",storageBucket:"itdiary-ase.firebasestorage.app",messagingSenderId:"889720897004",appId:"1:889720897004:web:c614ece867e0cb6f0a94c9"});let h=(0,f.xI)(d),i=(0,g.aU)(d),j=new f.HF;j.addScope("profile"),j.addScope("email");let k={USERS:"users"},l=async()=>{try{return(await (0,f.df)(h,j)).user}catch(a){throw console.error("Google sign-in error:",a),a}},m=async(a,b)=>{try{return(await (0,f.x9)(h,a,b)).user}catch(a){throw console.error("Email sign-in error:",a),a}},n=async(a,b,c)=>{try{let d=await (0,f.eJ)(h,a,b);return c&&d.user&&await (0,f.r7)(d.user,{displayName:c}),d.user}catch(a){throw console.error("Email sign-up error:",a),a}},o=async()=>{try{await (0,f.CI)(h)}catch(a){throw console.error("Sign-out error:",a),a}},p=a=>(0,f.hg)(h,a),q=async a=>{try{let b={email:a.email,displayName:a.displayName,photoURL:a.photoURL,provider:a.providerData[0]?.providerId||"email",emailVerified:a.emailVerified,createdAt:g.Dc.now(),updatedAt:g.Dc.now(),lastLoginAt:g.Dc.now()};await (0,g.BN)((0,g.H9)(i,k.USERS,a.uid),b,{merge:!0})}catch(a){console.error("Error saving user data:",a)}},r=a=>{if(!a?.code)return"An unknown error occurred";switch(a.code){case"auth/user-not-found":return"No user found with this email address";case"auth/wrong-password":return"Incorrect password";case"auth/email-already-in-use":return"An account with this email already exists";case"auth/weak-password":return"Password should be at least 6 characters";case"auth/invalid-email":return"Please enter a valid email address";case"auth/too-many-requests":return"Too many failed attempts. Please try again later";case"auth/popup-closed-by-user":return"Sign-in popup was closed before completing";case"auth/popup-blocked":return"Sign-in popup was blocked by the browser";case"auth/configuration-not-found":return"Firebase configuration not found. Please check your environment variables.";default:return a.message||"An error occurred"}}},43229:(a,b,c)=>{c.d(b,{Cv:()=>g,wV:()=>h});var d=c(4765),e=c.n(d);let f={sessionDuration:864e5};class g{constructor(){this.sessionData=null,this.refreshTimer=null}static getInstance(){return g.instance||(g.instance=new g),g.instance}generateSessionId(){let a=Date.now().toString(),b=Math.random().toString(36).substring(2);return e().SHA256(a+b).toString()}getSessionSecret(){return process.env.NEXT_PUBLIC_SESSION_SECRET||process.env.SESSION_SECRET||"glasstudio-default-secret-key-2024"}encryptData(a){try{let b=this.getSessionSecret();return e().AES.encrypt(a,b).toString()}catch(a){throw console.error("Session encryption error:",a),Error("Failed to encrypt session data")}}decryptData(a){try{let b=this.getSessionSecret(),c=e().AES.decrypt(a,b).toString(e().enc.Utf8);if(!c)throw Error("Decryption resulted in empty string");return c}catch(a){throw console.error("Session decryption error:",a),Error("Failed to decrypt session data")}}debugSession(a,b){}createSession(a){try{let b=new Date,c=new Date(b.getTime()+f.sessionDuration),d={userId:a.uid,email:a.email||"",displayName:a.displayName||void 0,photoURL:a.photoURL||void 0,provider:a.providerData[0]?.providerId==="google.com"?"google":"email",emailVerified:a.emailVerified,createdAt:b.toISOString(),expiresAt:c.toISOString(),lastActivity:b.toISOString(),sessionId:this.generateSessionId()};return this.debugSession("Creating new session",{userId:a.uid,email:a.email}),this.sessionData=d,this.saveSessionToCookies(d),this.startRefreshTimer(),this.debugSession("Session created successfully",{sessionId:d.sessionId}),d}catch(a){throw console.error("Failed to create session:",a),a}}saveSessionToCookies(a){}getSessionFromCookies(){return null}getCurrentSession(){return this.sessionData&&new Date(this.sessionData.expiresAt)>new Date?this.sessionData:this.getSessionFromCookies()}async refreshSession(){return null}clearSession(){this.sessionData=null,this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=null)}startRefreshTimer(){this.refreshTimer&&clearTimeout(this.refreshTimer);let a=f.sessionDuration-3e5;this.refreshTimer=setTimeout(async()=>{await this.refreshSession(),this.startRefreshTimer()},a)}isAuthenticated(){return null!==this.getCurrentSession()}getCurrentUser(){let a=this.getCurrentSession();return a?{uid:a.userId,email:a.email,displayName:a.displayName,photoURL:a.photoURL,emailVerified:a.emailVerified}:null}updateActivity(){this.sessionData&&(this.sessionData.lastActivity=new Date().toISOString(),this.saveSessionToCookies(this.sessionData))}}function h(){let a=g.getInstance();return{getSession:()=>a.getCurrentSession(),clearSession:()=>a.clearSession(),isAuthenticated:()=>a.isAuthenticated(),getCurrentUser:()=>a.getCurrentUser(),updateActivity:()=>a.updateActivity(),sessionManager:a}}}};