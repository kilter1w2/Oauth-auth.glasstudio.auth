(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[868],{438:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>l});var t=a(5155),r=a(2115);function l(){let[e,s]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[n,d]=(0,r.useState)("http://localhost:3000/test/callback"),[o,c]=(0,r.useState)("profile email"),[i,u]=(0,r.useState)("test_state_"+Math.random().toString(36).substr(2,9)),[x,m]=(0,r.useState)(null),[g,h]=(0,r.useState)(!1),b=async()=>{if(!e||!a)return void alert("Please enter both Credential ID and API Key");h(!0);try{let s="/api/generate/".concat(e,"/").concat(a,"/grab/?redirect_uri=").concat(encodeURIComponent(n),"&scope=").concat(encodeURIComponent(o),"&state=").concat(encodeURIComponent(i)),t=await fetch(s),r=await t.json();m(r),r.success&&r.data.oauth_url&&window.open(r.data.oauth_url,"_blank")}catch(e){m({error:e instanceof Error?e.message:"Unknown error"})}finally{h(!1)}},p=async()=>{h(!0);try{let e=await fetch("/api/keys/".concat("test_user_123")),s=await e.json();m(s)}catch(e){m({error:e instanceof Error?e.message:"Unknown error"})}finally{h(!1)}};return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"GLAStudio OAuth API Test Page"}),(0,t.jsxs)("div",{className:"mb-8 p-6 bg-blue-50 rounded-lg",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-blue-900 mb-4",children:"\uD83D\uDD17 Generate OAuth URL"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Credential ID"}),(0,t.jsx)("input",{type:"text",value:e,onChange:e=>s(e.target.value),placeholder:"cred_123456",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Public API Key"}),(0,t.jsx)("input",{type:"text",value:a,onChange:e=>l(e.target.value),placeholder:"gla_abcdef123456",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Redirect URI"}),(0,t.jsx)("input",{type:"text",value:n,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scope"}),(0,t.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State (Security Parameter)"}),(0,t.jsx)("input",{type:"text",value:i,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsx)("button",{onClick:b,disabled:g,className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Generating...":"Generate OAuth URL"})]}),(0,t.jsxs)("div",{className:"mb-8 p-6 bg-green-50 rounded-lg",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-green-900 mb-4",children:"\uD83D\uDD11 View API Keys"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"View all API credentials for a user (including public/private keys)"}),(0,t.jsx)("button",{onClick:p,disabled:g,className:"bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Loading...":"Get API Keys for test_user_123"})]}),x&&(0,t.jsxs)("div",{className:"p-6 bg-gray-50 rounded-lg",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"\uD83D\uDCCB API Response"}),(0,t.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-md overflow-auto text-sm",children:JSON.stringify(x,null,2)})]}),(0,t.jsxs)("div",{className:"mt-8 p-6 bg-yellow-50 rounded-lg",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-yellow-900 mb-4",children:"\uD83D\uDCDA Quick Setup Instructions"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm text-gray-700",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"1. Fix Firebase:"})," Run ",(0,t.jsx)("code",{className:"bg-gray-200 px-2 py-1 rounded",children:"node setup-firebase.js"})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"2. Create API Credentials:"})," Use ",(0,t.jsx)("code",{className:"bg-gray-200 px-2 py-1 rounded",children:"POST /api/credentials"})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"3. Get Your Keys:"})," Use ",(0,t.jsx)("code",{className:"bg-gray-200 px-2 py-1 rounded",children:"GET /api/keys/[userId]"})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"4. Generate OAuth URLs:"})," Use the form above or the API endpoint"]})]})]}),(0,t.jsxs)("div",{className:"mt-8 p-6 bg-purple-50 rounded-lg",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-purple-900 mb-4",children:"\uD83D\uDEE0ï¸ Available Endpoints"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("code",{className:"bg-gray-200 px-2 py-1 rounded",children:["GET /api/generate/","{id}","/","{apiKey}","/grab/"]})," - Generate OAuth URL"]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("code",{className:"bg-gray-200 px-2 py-1 rounded",children:["GET /api/keys/","{userId}"]})," - Get user's API keys"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("code",{className:"bg-gray-200 px-2 py-1 rounded",children:"POST /api/credentials"})," - Create new credentials"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("code",{className:"bg-gray-200 px-2 py-1 rounded",children:"GET /api/oauth/authorize"})," - OAuth authorization"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("code",{className:"bg-gray-200 px-2 py-1 rounded",children:"POST /api/oauth/token"})," - Exchange code for token"]})]})]})]})})})}},8936:(e,s,a)=>{Promise.resolve().then(a.bind(a,438))}},e=>{e.O(0,[441,964,358],()=>e(e.s=8936)),_N_E=e.O()}]);