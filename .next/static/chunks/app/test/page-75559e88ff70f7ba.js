(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{2647:(e,s,t)=>{Promise.resolve().then(t.bind(t,3529))},3529:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var a=t(5155),r=t(2115),l=t(5695);function n(){let e=(0,l.useRouter)(),[s,t]=(0,r.useState)(null),[n,i]=(0,r.useState)(!0),[d,c]=(0,r.useState)(null),[o,m]=(0,r.useState)(""),[h,x]=(0,r.useState)(""),[u,b]=(0,r.useState)(""),[g,p]=(0,r.useState)(null),[j,N]=(0,r.useState)("health");(0,r.useEffect)(()=>{y()},[]);let y=async()=>{try{i(!0);let e=await fetch("/api/health"),s=await e.json();t(s)}catch(e){console.error("Failed to check health:",e)}finally{i(!1)}},f=async()=>{if(!h||!d)return void alert("Please enter authorization code and ensure test credentials are generated");try{let e=await fetch("/api/oauth/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:h,client_id:d.clientId,client_secret:d.clientSecret,redirect_uri:d.redirectUris[0]})}),s=await e.json();s.access_token?b(s.access_token):alert("Failed to get access token: "+JSON.stringify(s,null,2))}catch(e){alert("Error exchanging code for token: "+e)}},v=async()=>{if(!u)return void alert("Please get an access token first");try{let e=await fetch("/api/oauth/userinfo",{headers:{Authorization:"Bearer ".concat(u)}}),s=await e.json();p(s)}catch(e){alert("Error getting user info: "+e)}};return n?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Checking system health..."})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"GLAStudio OAuth Test Console"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Test and debug your OAuth implementation"})]}),(0,a.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,a.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"health",label:"System Health"},{id:"credentials",label:"Test Credentials"},{id:"flow",label:"OAuth Flow"},{id:"endpoints",label:"API Testing"}].map(e=>(0,a.jsx)("button",{onClick:()=>N(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat(j===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:e.label},e.id))})}),"health"===j&&s&&(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"System Status"}),(0,a.jsx)(e=>{let{status:s}=e;return(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat({healthy:"bg-green-100 text-green-800",healthy_with_warnings:"bg-yellow-100 text-yellow-800",unhealthy:"bg-red-100 text-red-800",error:"bg-red-100 text-red-800"}[s]||"bg-gray-100 text-gray-800"),children:s.replace("_"," ").toUpperCase()})},{status:s.status})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Response Time"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[s.response_time_ms,"ms"]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Environment"}),(0,a.jsx)("p",{className:"text-lg text-gray-600",children:s.system.environment.node_env})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Version"}),(0,a.jsx)("p",{className:"text-lg text-gray-600",children:s.version})]})]}),s.issues.critical.length>0&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded p-4 mb-4",children:[(0,a.jsx)("h3",{className:"font-medium text-red-800 mb-2",children:"Critical Issues"}),(0,a.jsx)("ul",{className:"text-red-700 space-y-1",children:s.issues.critical.map((e,s)=>(0,a.jsxs)("li",{children:["â€¢ ",e]},s))})]}),s.issues.warnings.length>0&&(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-4 mb-4",children:[(0,a.jsx)("h3",{className:"font-medium text-yellow-800 mb-2",children:"Warnings"}),(0,a.jsx)("ul",{className:"text-yellow-700 space-y-1",children:s.issues.warnings.map((e,s)=>(0,a.jsxs)("li",{children:["â€¢ ",e]},s))})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded p-4",children:[(0,a.jsx)("h3",{className:"font-medium text-blue-800 mb-2",children:"Next Steps"}),(0,a.jsx)("ul",{className:"text-blue-700 space-y-1",children:s.next_steps.map((e,s)=>(0,a.jsxs)("li",{children:["â€¢ ",e]},s))})]})]})}),"credentials"===j&&(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Generate Test Credentials"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Generate temporary credentials for testing OAuth flows. These are not stored in the database."}),(0,a.jsx)("button",{onClick:()=>{c({clientId:"gla_".concat(Math.random().toString(36).substring(2,34)),clientSecret:Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2),apiKey:"gla_api_".concat(Math.random().toString(36).substring(2,42)),name:"Test Application",redirectUris:[window.location.origin+"/test/callback","http://localhost:3000/test/callback"]})},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Generate Test Credentials"}),d&&(0,a.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded",children:[(0,a.jsx)("h3",{className:"font-medium mb-2",children:"Client ID"}),(0,a.jsx)("code",{className:"text-sm bg-gray-100 p-2 rounded block",children:d.clientId})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded",children:[(0,a.jsx)("h3",{className:"font-medium mb-2",children:"Client Secret"}),(0,a.jsx)("code",{className:"text-sm bg-gray-100 p-2 rounded block",children:d.clientSecret})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded",children:[(0,a.jsx)("h3",{className:"font-medium mb-2",children:"API Key"}),(0,a.jsx)("code",{className:"text-sm bg-gray-100 p-2 rounded block",children:d.apiKey})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded",children:[(0,a.jsx)("h3",{className:"font-medium mb-2",children:"Redirect URIs"}),d.redirectUris.map((e,s)=>(0,a.jsx)("code",{className:"text-sm bg-gray-100 p-2 rounded block mb-1",children:e},s))]})]})]})}),"flow"===j&&(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Test OAuth 2.0 Flow"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"border-l-4 border-blue-500 pl-4",children:[(0,a.jsx)("h3",{className:"font-medium mb-2",children:"Step 1: Generate Authorization URL"}),(0,a.jsx)("button",{onClick:()=>{if(!d)return void alert("Please generate test credentials first");let e=new URLSearchParams({response_type:"code",client_id:d.clientId,redirect_uri:d.redirectUris[0],scope:"profile email",state:"test_state_"+Math.random().toString(36).substring(2)});m("".concat(window.location.origin,"/api/oauth/authorize?").concat(e.toString()))},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 mb-2",children:"Generate Authorization URL"}),o&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Authorization URL:"}),(0,a.jsx)("div",{className:"bg-gray-100 p-2 rounded text-sm break-all",children:o}),(0,a.jsx)("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-2 bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700",children:"Open Authorization URL"})]})]}),(0,a.jsxs)("div",{className:"border-l-4 border-yellow-500 pl-4",children:[(0,a.jsx)("h3",{className:"font-medium mb-2",children:"Step 2: Exchange Authorization Code for Token"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Enter authorization code from callback",value:h,onChange:e=>x(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2"}),(0,a.jsx)("button",{onClick:f,className:"bg-yellow-600 text-white px-4 py-2 rounded hover:bg-yellow-700",children:"Exchange for Token"})]}),u&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Access Token:"}),(0,a.jsx)("div",{className:"bg-gray-100 p-2 rounded text-sm break-all",children:u})]})]}),(0,a.jsxs)("div",{className:"border-l-4 border-green-500 pl-4",children:[(0,a.jsx)("h3",{className:"font-medium mb-2",children:"Step 3: Get User Information"}),(0,a.jsx)("button",{onClick:v,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Get User Info"}),g&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"User Information:"}),(0,a.jsx)("pre",{className:"bg-gray-100 p-2 rounded text-sm overflow-auto",children:JSON.stringify(g,null,2)})]})]})]})]})}),"endpoints"===j&&s&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"API Endpoints"}),(0,a.jsx)("div",{className:"space-y-4",children:Object.entries(s.endpoints).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"border border-gray-200 rounded p-4",children:[(0,a.jsxs)("h3",{className:"font-medium capitalize mb-2",children:[s.replace("_"," ")," Endpoint"]}),(0,a.jsx)("code",{className:"text-sm bg-gray-100 p-2 rounded block mb-2",children:t}),(0,a.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm",children:"Test Endpoint â†’"})]},s)})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("button",{onClick:()=>e.push("/dashboard"),className:"bg-blue-600 text-white px-4 py-3 rounded hover:bg-blue-700 text-left",children:[(0,a.jsx)("div",{className:"font-medium",children:"Open Dashboard"}),(0,a.jsx)("div",{className:"text-sm opacity-90",children:"Manage your applications"})]}),(0,a.jsxs)("button",{onClick:y,className:"bg-green-600 text-white px-4 py-3 rounded hover:bg-green-700 text-left",children:[(0,a.jsx)("div",{className:"font-medium",children:"Refresh Health Check"}),(0,a.jsx)("div",{className:"text-sm opacity-90",children:"Update system status"})]})]})]})]})]})})}},5695:(e,s,t)=>{"use strict";var a=t(8999);t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})}},e=>{e.O(0,[441,964,358],()=>e(e.s=2647)),_N_E=e.O()}]);